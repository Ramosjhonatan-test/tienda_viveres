{% extends 'base.html' %}
{% block title %}Iniciar Sesión{% endblock %}

{% block content %}
<div class="login-container d-flex justify-content-center align-items-center min-vh-100 position-relative overflow-hidden">
  <!-- Efecto de burbujas decorativas -->
  <div class="position-absolute top-0 start-0 w-100 h-100">
    <div class="login-bubble bubble-1"></div>
    <div class="login-bubble bubble-2"></div>
    <div class="login-bubble bubble-3"></div>
  </div>

  <div class="card shadow-lg border-0 rounded-4 p-4 animate__animated animate__fadeInDown login-card">
    <div class="card-body p-4">
      <div class="text-center mb-4">
        <div class="login-avatar mx-auto mb-3">
          <i class="fas fa-user-circle"></i>
        </div>
        <h3 class="fw-bold mb-1 text-gradient-primary">¡Bienvenido!</h3>
        <p class="text-muted mb-0">Ingresá tus credenciales para continuar</p>
      </div>

      <form method="POST" action="{{ url_for('usuario.login') }}" class="needs-validation" novalidate>
        <!-- Campo Usuario -->
        <div class="input-group mb-3" data-aos="fade-up" data-aos-delay="50">
          <span class="input-group-text bg-light-primary"><i class="fas fa-user text-primary"></i></span>
          <div class="form-floating flex-grow-1">
            <input type="text" class="form-control border-start-0" id="username" name="username" 
                   placeholder="Usuario" required>
            <label for="username">Usuario</label>
          </div>
        </div>

        <!-- Campo Contraseña -->
        <div class="input-group mb-4" data-aos="fade-up" data-aos-delay="100">
          <span class="input-group-text bg-light-primary"><i class="fas fa-lock text-primary"></i></span>
          <div class="form-floating flex-grow-1 position-relative">
            <input type="password" class="form-control border-start-0" id="password" name="password" 
                   placeholder="Contraseña" required>
            <label for="password">Contraseña</label>
            <button type="button" class="btn btn-link position-absolute end-0 top-0 mt-2 me-2 toggle-password">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>

        <div class="d-grid gap-2 mb-3" data-aos="fade-up" data-aos-delay="150">
          <button type="submit" class="btn btn-primary btn-gradient py-2 shadow-sm login-btn">
            <i class="fas fa-sign-in-alt me-2"></i>Ingresar
          </button>
        </div>

        <div class="text-center mt-3" data-aos="fade-up" data-aos-delay="200">
          <a href="#" class="small text-muted">¿Olvidaste tu contraseña?</a>
        </div>
      </form>

      <div class="login-divider my-4" data-aos="fade-up" data-aos-delay="250">
        <span class="bg-light px-2 text-muted small">o</span>
      </div>

      <div class="text-center" data-aos="fade-up" data-aos-delay="300">
        <p class="small text-muted mb-2">¿No tenés cuenta?</p>
        <a href="{{ url_for('usuario.registrar') }}" class="btn btn-outline-primary btn-sm">
          <i class="fas fa-user-plus me-1"></i>Registrate aquí
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .login-container {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  }
  
  .login-card {
    width: 100%;
    max-width: 420px;
    backdrop-filter: blur(5px);
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  
  .login-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(45deg, #4e73df, #224abe);
    color: white;
    font-size: 2.5rem;
  }
  
  .text-gradient-primary {
    background: linear-gradient(45deg, #4e73df, #224abe);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  
  .btn-gradient {
    background: linear-gradient(45deg, #4e73df, #224abe);
    border: none;
    transition: all 0.3s ease;
  }
  
  .btn-gradient:hover {
    background: linear-gradient(45deg, #3a5ccc, #1d3b8b);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(78, 115, 223, 0.4);
  }
  
  .bg-light-primary {
    background-color: rgba(78, 115, 223, 0.1);
  }
  
  .login-divider {
    position: relative;
    text-align: center;
    border-top: 1px solid #dee2e6;
  }
  
  .login-divider span {
    position: relative;
    top: -10px;
  }
  
  .login-bubble {
    position: absolute;
    border-radius: 50%;
    background-color: rgba(78, 115, 223, 0.05);
    animation: float 15s infinite linear;
  }
  
  .bubble-1 {
    width: 200px;
    height: 200px;
    top: -50px;
    left: -50px;
  }
  
  .bubble-2 {
    width: 300px;
    height: 300px;
    bottom: -100px;
    right: -100px;
    animation-delay: 3s;
  }
  
  .bubble-3 {
    width: 150px;
    height: 150px;
    top: 40%;
    right: 20%;
    animation-delay: 5s;
  }
  
  @keyframes float {
    0% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
    100% { transform: translateY(0) rotate(360deg); }
  }
  
  .toggle-password {
    z-index: 5;
    color: #6c757d;
  }
  
  .form-control:focus {
    border-color: #4e73df;
    box-shadow: 0 0 0 0.25rem rgba(78, 115, 223, 0.25);
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Toggle para mostrar/ocultar contraseña
  document.querySelectorAll('.toggle-password').forEach(function(button) {
    button.addEventListener('click', function() {
      const input = this.closest('.input-group').querySelector('input');
      const icon = this.querySelector('i');
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.replace('fa-eye', 'fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.replace('fa-eye-slash', 'fa-eye');
      }
    });
  });

  // Inicializar AOS si está cargado
  if (typeof AOS !== 'undefined') {
    AOS.init({
      duration: 600,
      easing: 'ease-out-quad',
      once: true
    });
  }
});
</script>
{% endblock %}